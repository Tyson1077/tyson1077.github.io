<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"tyson1077.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="GD图像处理gd库引入api指外部现成功能机制接口，通过数据格式调用函数&#x2F;方法类实现功能；graphic device图像处理扩展外部api：支持php脚本在本地集成扩展php.ini通过调用对应函数实现图像制作功能；  开启加载gd库扩展：php.iniextension &#x3D; php_gd2.dll; 重启apachegd库基本处理画布处理逻辑处理逻辑：内存中开辟块内存区用于图片制作 创建画布；">
<meta property="og:type" content="article">
<meta property="og:title" content="day15_php">
<meta property="og:url" content="https://tyson1077.github.io/day15_php/index.html">
<meta property="og:site_name" content="tyson自留地">
<meta property="og:description" content="GD图像处理gd库引入api指外部现成功能机制接口，通过数据格式调用函数&#x2F;方法类实现功能；graphic device图像处理扩展外部api：支持php脚本在本地集成扩展php.ini通过调用对应函数实现图像制作功能；  开启加载gd库扩展：php.iniextension &#x3D; php_gd2.dll; 重启apachegd库基本处理画布处理逻辑处理逻辑：内存中开辟块内存区用于图片制作 创建画布；">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://s2.loli.net/2022/06/06/8IQb91EgBM2SxHX.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/06/IaEUJm6wWGyF14k.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/06/TfEsgmeXS48P1a7.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/06/gZAkzlNPY5JvTWw.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/06/As6ig5BDWHaftZm.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/06/A4Xbu3RYI1haicv.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/06/4uvItQcgxrdbkzj.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/06/A4Xbu3RYI1haicv.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/06/ZROACumr1TkjS4p.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/06/A4Xbu3RYI1haicv.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/06/j5SC1qQHmu8dcMP.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/06/A4Xbu3RYI1haicv.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/06/cD6MxLNyUTHnkzI.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/06/A4Xbu3RYI1haicv.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/06/3xoIVQW7yTNd5wp.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/06/BecuvU3Cni6oPkY.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/06/xLBqFvSc5H7hTnR.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/06/7ZQE8UJgvTOw2mF.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/06/FcOUvXeqQE3jIpN.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/06/FNkgsIBnmU7YqfD.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/06/O7VwprXsUoPcg5q.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/06/DtYlq9Z3y7kIiQ1.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/06/nCsZAcbzRw7O32t.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/06/HZy1JEWcN6qId45.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/06/Lyi6VUu5SYtrdjA.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/06/QRvhWHPndLDfXlx.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/06/wnSiKx4PvIO3qDc.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/06/VzdDT5YFl7HSiPm.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/06/ReAQEday2fTWmYj.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/06/kwZN4r7p2aqLgJe.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/06/JNUcqBsC2A47n8v.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/06/R2xUokrqEV5Gsj9.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/06/ygLThxQH7l84z6I.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/06/iBTDOF7hJ5Xsj2W.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/07/Pag5LK2AEG8virO.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/07/vJDkA4LGgqYeFPB.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/07/9uTDZr5e8PQcgq2.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/13/FzvidqJEfr297Km.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/13/KQrojlTe3G7PFLu.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/13/Qb148iBacqzpudf.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/13/q5xVinlG2ONCv4I.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/13/5wFZJcMEjBGOPuY.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/13/5xLB9YfyXtsJz8v.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/13/3fKUC9vEjxVO1lW.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/13/CNYwiuWdPFEnxDQ.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/13/VwtnhRKp5DgWsao.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/13/mlEyCuATULwBN7R.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/13/UaAHuSlCYot4W2k.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/13/hxgdzaAulJf6mSe.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/13/hZ5IPJuBrvVxWg9.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/13/e2qK6VjzrlDByt8.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/13/drnO8qe9K34SjgN.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/13/NPo2Ufu4m3nTEJX.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/13/lTeEmI4qZB8QSrA.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/13/NB5zg6x7A4qrIPG.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/13/ygbuQipjoxKnYV6.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/13/SWvZj6sTUJQo14l.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/13/GCRSFbaU1gwYVxP.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/13/S4UjohvVZtdf873.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/13/pjAqi4tTB6ZLdao.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/13/3pqsemurnYXd1fk.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/13/CnPlTrvI3zASRW5.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/13/g4rAcMSLiEsHCbu.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/13/n21STckMZP7g3di.png">
<meta property="og:image" content="https://s2.loli.net/2022/06/13/uGRyts3IVrHd8Bm.png">
<meta property="article:published_time" content="2022-06-13T13:26:03.026Z">
<meta property="article:modified_time" content="2022-06-13T13:27:32.008Z">
<meta property="article:author" content="tyson_H">
<meta property="article:tag" content="hexo,tyson">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s2.loli.net/2022/06/06/8IQb91EgBM2SxHX.png">

<link rel="canonical" href="https://tyson1077.github.io/day15_php/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>day15_php | tyson自留地</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">tyson自留地</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">hello_world</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://tyson1077.github.io/day15_php/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="tyson_H">
      <meta itemprop="description" content="tyson's_1point3acres">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tyson自留地">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          day15_php
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-06-13 21:26:03 / Modified: 21:27:32" itemprop="dateCreated datePublished" datetime="2022-06-13T21:26:03+08:00">2022-06-13</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/php/" itemprop="url" rel="index"><span itemprop="name">php</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="GD图像处理"><a href="#GD图像处理" class="headerlink" title="GD图像处理"></a>GD图像处理</h1><h2 id="gd库引入"><a href="#gd库引入" class="headerlink" title="gd库引入"></a>gd库引入</h2><p>api指外部<strong>现成功能</strong>机制接口，通过数据<strong>格式调用</strong>函数/方法类<strong>实现功能</strong>；<br>graphic device图像处理扩展外部api：支持php脚本在本地集成扩展php.ini通过调用对应函数实现图像制作功能；</p>
<ol>
<li>开启加载gd库扩展：php.ini<br><code>extension = php_gd2.dll;</code><br><img src="https://s2.loli.net/2022/06/06/8IQb91EgBM2SxHX.png"></li>
<li>重启apache<h2 id="gd库基本处理"><a href="#gd库基本处理" class="headerlink" title="gd库基本处理"></a>gd库基本处理</h2><h3 id="画布处理逻辑"><a href="#画布处理逻辑" class="headerlink" title="画布处理逻辑"></a>画布处理逻辑</h3>处理逻辑：内存中开辟块内存区用于图片制作</li>
<li>创建画布；</li>
<li>开启操作画布：创建/(句柄/实线)/操作；</li>
<li>保存资源；</li>
<li>销毁画布；<h3 id="创建画布资源"><a href="#创建画布资源" class="headerlink" title="创建画布资源"></a>创建画布资源</h3></li>
<li>imagecreate(宽?,高?) //创建空白白色画布；<br><code>$资源定义赋值? = imagecreate(?,?);</code></li>
<li>imagecreatetruecolor(宽?,高?) //创建真彩(无色黑)黑色画布；<br><code>$资源定义赋值? = imagecreatetruecolor(?,?);</code><br><img src="https://s2.loli.net/2022/06/06/IaEUJm6wWGyF14k.png"><h4 id="开启画布资源：匹配对应格式"><a href="#开启画布资源：匹配对应格式" class="headerlink" title="开启画布资源：匹配对应格式"></a>开启画布资源：匹配对应格式</h4></li>
<li>imagecreatefromjpeg(路径?) //打开jpeg格式图片资源；<br><code>$资源定义赋值? = imagecreatefromjpeg(?);</code><br><img src="https://s2.loli.net/2022/06/06/TfEsgmeXS48P1a7.png"></li>
<li>imagecreatefromgif(路径?) //打开gif格式图片资源；<br><code>$资源定义赋值? = imagecreatefromgif(?);</code></li>
<li>imagecreatefrompng(路径?) //打开png格式图片资源；<br><code>$资源定义赋值? = imagecreatefromgif(?);</code><h3 id="操作画布：创建-句柄-实线-操作"><a href="#操作画布：创建-句柄-实线-操作" class="headerlink" title="操作画布：创建/(句柄/实线)/操作"></a>操作画布：创建/(句柄/实线)/操作</h3>指定画布资源，对画布操作资源：<strong>指定着色</strong>；</li>
<li>imagecolorallocate(画布资源?,r?,g?,b?) //对rgb三色组指定画布资源<strong>分配颜色组</strong>0-255，<strong>返回</strong>颜色句柄数值；<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$资源定义赋值? = imagecreatetruecolor(宽?,高?);</span><br><span class="line">$颜色句柄资源? = imagecolorallocate(画布资源?,r?,g?,b?);</span><br></pre></td></tr></table></figure>
<img src="https://s2.loli.net/2022/06/06/gZAkzlNPY5JvTWw.png"></li>
</ol>
<p>注意：<br>    1. 空白资源imagecreate分配颜色组可以自动<strong>填充第一颜色组</strong>(背景色)/真彩资源imagecreatetruecolor分配颜色组无法自动填充第一颜色组(背景色)，用于操作资源时<strong>指定着色组</strong>；<br>    2. 操作图片资源前，需要分配第一颜色组；</p>
<h4 id="填充颜色"><a href="#填充颜色" class="headerlink" title="填充颜色"></a>填充颜色</h4><ol start="2">
<li>imagefill(画布资源?,x坐标?,y坐标?,颜色句柄资源?) //指定位置填充背景颜色组；<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$画布资源? = imagecreatetruecolor(宽?,高?);</span><br><span class="line">$颜色句柄资源? = imagecolorallocate(画布资源?,r?,g?,b?);</span><br><span class="line">imagefill(画布资源?,x坐标?,y坐标?,颜色句柄资源?);</span><br></pre></td></tr></table></figure>
<img src="https://s2.loli.net/2022/06/06/As6ig5BDWHaftZm.png"><br>填充逻辑：指定点匹配相邻点，颜色组一致则自动渲染填充全图；</li>
</ol>
<h4 id="制作实线"><a href="#制作实线" class="headerlink" title="制作实线"></a>制作实线</h4><ol start="3">
<li><p>imageline(画布资源?,x坐标?,y坐标?,x坐标终点?,y坐标终点?,颜色句柄资源?) //制作实线；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$画布资源? = imagecreatetruecolor(宽?,高?);</span><br><span class="line">$颜色句柄(实线)资源? = imagecolorallocate(画布资源?,r?,g?,b?);</span><br><span class="line">imageline(画布资源?,x坐标?,y坐标?,x坐标终点?,y坐标终点?,颜色句柄(实线)资源?);</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/06/06/A4Xbu3RYI1haicv.png"><br><img src="https://s2.loli.net/2022/06/06/4uvItQcgxrdbkzj.png"></p>
<h4 id="制作矩形"><a href="#制作矩形" class="headerlink" title="制作矩形"></a>制作矩形</h4></li>
<li><p>imagerectangle(画布资源?,x坐标?,y坐标?,x坐标终点?,y坐标终点?,颜色资源?) //制作矩形；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$画布资源? = imagecreatetruecolor(宽?,高?);</span><br><span class="line">$颜色句柄资源? = imagecolorallocate(画布资源?,r?,g?,b?);</span><br><span class="line">imagerectangle(画布资源?,x坐标?,y坐标?,x坐标终点?,y坐标终点?,颜色句柄资源?);</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/06/06/A4Xbu3RYI1haicv.png"><br><img src="https://s2.loli.net/2022/06/06/ZROACumr1TkjS4p.png"></p>
<h4 id="制作圆弧"><a href="#制作圆弧" class="headerlink" title="制作圆弧"></a>制作圆弧</h4></li>
<li><p>imagearc(画布资源?,x轴坐标?,y轴坐标?,宽?,高?,起始角度0?,终点角度360?,颜色句柄资源?) //制作圆弧；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$画布资源? = imagecreatetruecolor(宽?,高?);</span><br><span class="line">$颜色句柄资源? = imageallocate(画布资源?,r?,g?,b?);</span><br><span class="line">imagearc(画布资源?,x轴坐标?,y轴坐标?,宽?,高?,起始角度0?,终点角度360?,颜色句柄资源?);</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/06/06/A4Xbu3RYI1haicv.png"><br><img src="https://s2.loli.net/2022/06/06/j5SC1qQHmu8dcMP.png"></p>
<h4 id="画布写字"><a href="#画布写字" class="headerlink" title="画布写字"></a>画布写字</h4></li>
<li><p>imagestring(画布资源?,文字大小?,x坐标?,y坐标?,文字内容?,颜色句柄资源?) //画布水平写字；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$画布资源? = imagecreatetruecolor(宽?,高?);</span><br><span class="line">$颜色句柄资源? = imageallocate(画布资源?,r?,g?,b?);</span><br><span class="line">imagestring(画布资源?,文字大小?,x坐标?,y坐标?,文字内容?,颜色句柄资源?);</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/06/06/A4Xbu3RYI1haicv.png"><br><img src="https://s2.loli.net/2022/06/06/cD6MxLNyUTHnkzI.png"></p>
</li>
<li><p>imagettftext(画布资源?,文字大小?,旋转角度?,x坐标?,y坐标?,颜色句柄资源?,文字字体?,文字内容?) //画布旋转写字?；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$画布资源? = imagecreatetruecolor(宽?,高?);</span><br><span class="line">$颜色句柄资源? = imageallocate(画布资源?,r?,g?,b?);</span><br><span class="line">imagettftext(画布资源?,文字大小?,旋转角度?,x坐标?,y坐标?,颜色句柄资源?,文字字体?,文字内容?);</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/06/06/A4Xbu3RYI1haicv.png"><br><img src="https://s2.loli.net/2022/06/06/3xoIVQW7yTNd5wp.png"></p>
<h3 id="保存输出资源：网页图片-本地文件"><a href="#保存输出资源：网页图片-本地文件" class="headerlink" title="保存输出资源：网页图片/本地文件"></a>保存输出资源：网页图片/本地文件</h3><p>保存方式：</p>
</li>
<li><p>输出保存至浏览器网页：提供画布资源，没有指定保存路径；<br> 通过header()<strong>响应头告知</strong>浏览器文件是画布，画布出错时关闭header()响应头输出报错/画布输出未报错查看判断源代码是否输出正常；</p>
<p> 保存输出操作：</p>
<ol>
<li>imagepng(画布资源?);<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$画布资源? = imagecreatetruecolor(宽?,高?);</span><br><span class="line">$颜色句柄资源? = imagecolorallocate(画布资源?,r?,g?,b?);</span><br><span class="line">header(&quot;content-type:image/png&quot;);</span><br><span class="line">imagepng(画布资源?);</span><br></pre></td></tr></table></figure>
<img src="https://s2.loli.net/2022/06/06/BecuvU3Cni6oPkY.png"><br><img src="https://s2.loli.net/2022/06/06/xLBqFvSc5H7hTnR.png"><br><img src="https://s2.loli.net/2022/06/06/7ZQE8UJgvTOw2mF.png"></li>
<li>imagejpeg(画布资源?);</li>
<li>imagegif(画布资源?);</li>
</ol>
</li>
<li><p>输出为保存本地：提供画布资源，指定保存路径；</p>
<p> 保存输出操作：</p>
<ol>
<li>imagepng(画布资源?,[路径?]);</li>
<li>imagejpeg(画布资源?,[路径?]);</li>
<li>imagegif(画布资源?,[路径?]);<h3 id="销毁画布资源"><a href="#销毁画布资源" class="headerlink" title="销毁画布资源"></a>销毁画布资源</h3>施放内存块画布资源；<br>imagedestroy(画布资源?);<h3 id="获取画布资源：信息"><a href="#获取画布资源：信息" class="headerlink" title="获取画布资源：信息"></a>获取画布资源：信息</h3><h4 id="画布尺寸：指定信息-宽-高"><a href="#画布尺寸：指定信息-宽-高" class="headerlink" title="画布尺寸：指定信息(宽/高)"></a>画布尺寸：指定信息(宽/高)</h4></li>
</ol>
</li>
<li><p>imagesx(画布资源?); //获取宽；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$资源定义赋值? = &quot;路径?&quot;;</span><br><span class="line">$画布资源? = imagecreatefromjpeg(资源定义赋值?);</span><br><span class="line">echo imgsx(画布资源?);</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/06/06/FcOUvXeqQE3jIpN.png"></p>
</li>
<li><p>imagesy(); //获取高；</p>
<h4 id="图片尺寸：所有信息输出数组"><a href="#图片尺寸：所有信息输出数组" class="headerlink" title="图片尺寸：所有信息输出数组"></a>图片尺寸：所有信息输出数组</h4><p>数组信息：宽/高/资源格式/宽高字符串/位/颜色句柄类型/资源类型<br>getimagesize(资源定义赋值?);</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$资源定义赋值? = &quot;路径?&quot;;</span><br><span class="line">$画布资源? = getimagesize(资源定义赋值?);</span><br><span class="line">print_r(画布资源?);</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/06/06/FNkgsIBnmU7YqfD.png"><br><img src="https://s2.loli.net/2022/06/06/O7VwprXsUoPcg5q.png"></p>
<h2 id="gd库验证码"><a href="#gd库验证码" class="headerlink" title="gd库验证码"></a>gd库验证码</h2><p>captcha验证码即completely automated public turing test to tell computers and humans apart全自动区分计算机和人类图灵测试；</p>
<h3 id="实现逻辑"><a href="#实现逻辑" class="headerlink" title="实现逻辑"></a>实现逻辑</h3><p>计算机生成验证码写入画布资源，用户写入验证码提交给服务器与计算机生成验证码进行对比判断；</p>
<h3 id="验证码生成展示"><a href="#验证码生成展示" class="headerlink" title="验证码生成展示"></a>验证码生成展示</h3><ol>
<li><p>生成创建画布资源：背景色处理；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//创建画布资源</span><br><span class="line">$画布资源 = imagecreatetruecolor(宽?,高?);</span><br><span class="line">//指定第二着色填充</span><br><span class="line">$颜色句柄资源 = imagecolorallocate(画布资源?,r?,g?.b?);</span><br><span class="line">imagefill(画布资源?,x坐标?,y坐标?,颜色句柄资源?);</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/06/06/DtYlq9Z3y7kIiQ1.png"></p>
</li>
<li><p>写入字符串；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$文字字体? = &quot;路径?&quot;;</span><br><span class="line">$文字颜色句柄资源? = imagecolorallocate(画布资源?,r?,g?,b?);</span><br><span class="line">imagettftext(画布资源?,文字大小?,旋转角度?,x坐标?,y坐标?,文字颜色句柄资源?,文字字体?,文字内容?);</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/06/06/nCsZAcbzRw7O32t.png"><br><img src="https://s2.loli.net/2022/06/06/HZy1JEWcN6qId45.png"></p>
</li>
<li><p>输出图片给浏览器；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">header(&quot;content-type:image/png&quot;);</span><br><span class="line">imagepng(画布资源?);</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/06/06/Lyi6VUu5SYtrdjA.png"></p>
</li>
<li><p>销毁资源；<br><code>imagedestroy(画布资源?);</code></p>
<h3 id="验证码随机变化：文字"><a href="#验证码随机变化：文字" class="headerlink" title="验证码随机变化：文字"></a>验证码随机变化：文字</h3><p>处理阶段：创建画布资源/写入字符串；</p>
</li>
<li><p>生成随机文字：字符集；<br><code>$定义赋值? = &quot;?&quot;;</code><br><img src="https://s2.loli.net/2022/06/06/QRvhWHPndLDfXlx.png"></p>
</li>
<li><p>获取字符集中随机汉字输出；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//获取字符串长度</span><br><span class="line">$字符串长度? = strlen(定义赋值?);</span><br><span class="line">//获取单中文字符：字符串总长/3</span><br><span class="line">$单中文字符? = 字符串长度 / 3;</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/06/06/wnSiKx4PvIO3qDc.png"></p>
</li>
<li><p>随机获取中文字符输出；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//方法一</span><br><span class="line">$随机获取? = mt_rand(0,单中文字符? - 1);</span><br><span class="line">$字符输出? = substr(定义赋值?,随机获取? * 3,3);</span><br><span class="line">echo $字符输出?;</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/06/06/VzdDT5YFl7HSiPm.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//方法二</span><br><span class="line">$随机获取输出? = substr(定义赋值?,mt_rand(0,单中文字符? - 1) * 3,3);</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/06/06/ReAQEday2fTWmYj.png"></p>
</li>
<li><p>随机文字写入字符串；<br><code>imagettftext(画布资源?,文字大小?,旋转角度?,x坐标?,y坐标?,文字颜色句柄资源?,文字字体?,文字内容?(写入字符串));</code><br><img src="https://s2.loli.net/2022/06/06/kwZN4r7p2aqLgJe.png"></p>
<h3 id="验证码随机变化：颜色"><a href="#验证码随机变化：颜色" class="headerlink" title="验证码随机变化：颜色"></a>验证码随机变化：颜色</h3><p>处理阶段：写入字符串；<br><code>$文字颜色句柄资源? = imagecolorallocate(画布资源?,r?:mt_rand(0,100),g?:mt_rand(0,100),b?:mt_rand(0,100));</code><br><img src="https://s2.loli.net/2022/06/06/JNUcqBsC2A47n8v.png"></p>
<h3 id="验证码生成干扰：背景模糊-实点线干扰"><a href="#验证码生成干扰：背景模糊-实点线干扰" class="headerlink" title="验证码生成干扰：背景模糊/实点线干扰"></a>验证码生成干扰：背景模糊/实点线干扰</h3><p>处理阶段：写入字符串；</p>
<h4 id="循环生成干扰点"><a href="#循环生成干扰点" class="headerlink" title="循环生成干扰点"></a>循环生成干扰点</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for($i = 0;$i &lt; 20;$i++)&#123;</span><br><span class="line">$颜色句柄资源? = imagecolorallocate(画布资源?,r?,g?,b?);</span><br><span class="line">imagestring(画布资源?,文字大小?,宽?,高?,文字内容?,颜色句柄资源?);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/06/06/R2xUokrqEV5Gsj9.png"></p>
<h4 id="循环生成干扰线"><a href="#循环生成干扰线" class="headerlink" title="循环生成干扰线"></a>循环生成干扰线</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for($i = 0,$i &lt; 20,$i++)&#123;</span><br><span class="line">$颜色句柄资源? = imagecolorallocate(画布资源?,r?,g?,b?);</span><br><span class="line">imageline(画布资源?,x坐标?,y坐标?,x坐标终点?,y坐标终点?,颜色句柄资源?);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/06/06/ygLThxQH7l84z6I.png"></p>
<h4 id="变化文字：大小-位置-可变参数"><a href="#变化文字：大小-位置-可变参数" class="headerlink" title="变化文字：大小/位置/可变参数"></a>变化文字：大小/位置/可变参数</h4><p><img src="https://s2.loli.net/2022/06/06/iBTDOF7hJ5Xsj2W.png"></p>
<h3 id="验证码点击刷新"><a href="#验证码点击刷新" class="headerlink" title="验证码点击刷新"></a>验证码点击刷新</h3></li>
<li><p>创建表单：内置img标签显示图片宽/高；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div style = &quot;width:?px;height:?px;margin:?px auto&quot;&gt;</span><br><span class="line">&lt;img src = &quot;?.php&quot; /&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/06/07/Pag5LK2AEG8virO.png"></p>
</li>
<li><p>验证码点击更换：内置img标签src来源请求php脚本进行更换验证码；img标签增加点击事件(src<strong>来源请求发起</strong>取决于浏览器/<strong>浏览器请求发起</strong>取决于src来源是否改变)；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src = &quot;?.php&quot; onclick = &quot;this.src = ?.php1&quot; /&gt;</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/06/07/vJDkA4LGgqYeFPB.png"></p>
</li>
<li><p>对img标签src来源请求：进行变化无限制；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src = &quot;?.php&quot; onclick = &quot;this.src = &#x27;?.php?captcha=&#x27;+math.random()&quot;/&gt;</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/06/07/9uTDZr5e8PQcgq2.png"></p>
<h2 id="缩略图处理"><a href="#缩略图处理" class="headerlink" title="缩略图处理"></a>缩略图处理</h2><h3 id="实现原理"><a href="#实现原理" class="headerlink" title="实现原理"></a>实现原理</h3><p>通过原图画布资源生成尺寸较小画布资源；</p>
</li>
<li><p>获取开启：原图画布资源；</p>
</li>
<li><p>画布复制传入：较小画布(缩略图)资源生成保存；</p>
</li>
<li><p>销毁资源；</p>
<h3 id="缩略图：指定宽高"><a href="#缩略图：指定宽高" class="headerlink" title="缩略图：指定宽高"></a>缩略图：指定宽高</h3><p><img src="https://s2.loli.net/2022/06/13/FzvidqJEfr297Km.png"></p>
</li>
<li><p>获取开启：原图画布资源；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$资源定义赋值? = &quot;路径?&quot;;</span><br><span class="line">$画布资源? = imagecreatefromjpeg(资源定义赋值?);</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/06/13/KQrojlTe3G7PFLu.png"></p>
</li>
<li><p>生成获取：缩略图画布资源；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">缩略图资源? = imagecreatetruecolor(宽?,高?);</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/06/13/Qb148iBacqzpudf.png"></p>
</li>
<li><p>画布复制传入：通过GD拓展函数；<br>复制传入GD函数<br>imagecopyresamepled(缩略图资源?,画布资源?,x坐标?,y坐标?,画布x坐标?,画布y坐标?,宽?,高?,画布宽?,画布高?);</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$复制资源? = imagecopyresampled(缩略图资源?,画布资源?,x坐标?,y坐标?,画布x坐标?,画布y坐标?,宽?,高?,imagesx(画布资源?),imagesy(画布资源?));</span><br><span class="line">var_dump(复制资源?);</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/06/13/q5xVinlG2ONCv4I.png"></p>
</li>
<li><p>保存缩略图；</p>
<ol>
<li>指定格式header(“content-type:image/?”);</li>
<li>保存函数imagepng()/imagejpeg()/imagegif();<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">header(&quot;content-type:image/png&quot;);</span><br><span class="line">imagepng(缩略图画布资源?[路径?]);</span><br></pre></td></tr></table></figure>
<img src="https://s2.loli.net/2022/06/13/5wFZJcMEjBGOPuY.png"></li>
</ol>
</li>
<li><p>销毁资源；</p>
<ol>
<li>销毁画布资源imagedestroy(画布资源?);</li>
<li>销毁缩略图资源imagedestroy(缩略图资源?);<br><img src="https://s2.loli.net/2022/06/13/5xLB9YfyXtsJz8v.png"><h3 id="缩略图：适配等比宽高"><a href="#缩略图：适配等比宽高" class="headerlink" title="缩略图：适配等比宽高"></a>缩略图：适配等比宽高</h3>基于<strong>不会失真</strong>变形基础上通过<strong>适配算法计算获得</strong>等比宽高比例的缩略图；<h4 id="适配算法实现原理"><a href="#适配算法实现原理" class="headerlink" title="适配算法实现原理"></a>适配算法实现原理</h4></li>
</ol>
</li>
<li><p>计算缩略图宽高比例；</p>
</li>
<li><p>计算原图宽高比例；</p>
</li>
<li><p>两者比较运算生成：</p>
<ol>
<li>缩略图(1:1)大于原图(1:2)：高度优先，宽度补白；</li>
<li>缩略图(1:2)小于原图(1:1)：宽度优先，高度补白；<br><img src="https://s2.loli.net/2022/06/13/3fKUC9vEjxVO1lW.png"><h4 id="实现处理"><a href="#实现处理" class="headerlink" title="实现处理"></a>实现处理</h4></li>
</ol>
</li>
<li><p>获取开启：原图画布资源；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$资源定义赋值 = 路径?;</span><br><span class="line">$画布资源? = imagecreatefromjpeg(资源定义赋值?);</span><br></pre></td></tr></table></figure></li>
<li><p><strong>画布资源：信息尺寸输出数组</strong>；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$画布资源尺寸? = getimagesize(画布资源?);</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/06/13/CNYwiuWdPFEnxDQ.png"></p>
</li>
<li><p>生成获取：缩略图画布资源；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$缩略图资源? = imagecreatetruecolor(宽?,高?);</span><br></pre></td></tr></table></figure></li>
<li><p><strong>缩略图：填充背景色</strong>；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$颜色句柄? = imagecolorallocate(缩略图资源?,r?,g?,b?);</span><br><span class="line">imagefill(缩略图资源?,x坐标?,y坐标?,z坐标?,颜色句柄?);</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/06/13/VwtnhRKp5DgWsao.png"></p>
</li>
<li><p><strong>计算获取缩略图从原图复制宽高比：选择补白范围</strong>；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$缩略图宽高比? = 100 / 100;</span><br><span class="line">$画布宽高比? = $画布资源尺寸?[0] / $画布资源尺寸?[1];</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/06/13/mlEyCuATULwBN7R.png"></p>
</li>
<li><p>比较运算：宽高比例；</p>
<ol>
<li>条件比较运算：宽高比；</li>
<li>计算缩略图宽高对应位置：放中间；<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">//初始化缩略图宽高比；</span><br><span class="line">$缩略图宽? = $缩略图高? = 0;</span><br><span class="line">//初始化缩略图xy坐标；</span><br><span class="line">$缩略图x坐标资源? = $缩略图y坐标资源? = 0;</span><br><span class="line">if(缩略图宽高比? &gt;= 画布宽高比?)&#123;</span><br><span class="line">	//缩略图宽高比 大于 原图画布宽高比</span><br><span class="line">	$缩略图高? = 100;</span><br><span class="line">	$缩略图宽? = floor(画布宽高比? * 缩略图高?);</span><br><span class="line">	//宽度调整</span><br><span class="line">	$缩略图x坐标资源? = floor((100 - 缩略图宽?)/2);</span><br><span class="line">&#125;else&#123;</span><br><span class="line">	//缩略图宽高比 小于 原图宽高比</span><br><span class="line">	$缩略图宽? = 100;</span><br><span class="line">	$缩略图高? = floor(缩略图宽? / 画布宽高比?);</span><br><span class="line">	//高度调整</span><br><span class="line">	$缩略图y坐标资源? = floor((100 - 缩略图高?)/2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<img src="https://s2.loli.net/2022/06/13/UaAHuSlCYot4W2k.png"></li>
</ol>
</li>
<li><p>复制传入GD扩展函数：生成复制资源；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$复制资源? = imagecopyresampled(缩略图资源?,画布资源?,x坐标?,y坐标?,画布x坐标?,画布y坐标?,宽?,高?,画布宽?,画布高?);</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/06/13/hxgdzaAulJf6mSe.png"></p>
</li>
<li><p>保存缩略图；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">header(&quot;content-type:image/png&quot;);</span><br><span class="line">imagepng(缩略图资源?,[路径?]);</span><br></pre></td></tr></table></figure></li>
<li><p>销毁资源；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">imagedestroy(画布资源?);</span><br><span class="line">imagedestroy(缩略图资源?);</span><br></pre></td></tr></table></figure>
<h2 id="GD库水印处理"><a href="#GD库水印处理" class="headerlink" title="GD库水印处理"></a>GD库水印处理</h2><p>将水印资源复制传递到原图画布资源上面合并；</p>
<h3 id="实现逻辑-1"><a href="#实现逻辑-1" class="headerlink" title="实现逻辑"></a>实现逻辑</h3></li>
<li><p>获取原图画布资源；</p>
</li>
<li><p>获取水印资源；</p>
</li>
<li><p>合并资源：复制传递后叠加；</p>
</li>
<li><p>保存输出；</p>
</li>
<li><p>销毁资源；</p>
<h3 id="指定固定位置水印图"><a href="#指定固定位置水印图" class="headerlink" title="指定固定位置水印图"></a>指定固定位置水印图</h3></li>
<li><p>获取开启资源：原图画布/水印图；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$资源定义赋值? = 路径?;</span><br><span class="line">$水印定义赋值? = 路径?;</span><br><span class="line">$画布资源? = imagecreatefromjpeg(定义赋值?);</span><br><span class="line">$水印资源? = imagecreatefromjpeg(水印定义赋值?);</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/06/13/hZ5IPJuBrvVxWg9.png"></p>
</li>
<li><p>合并资源：通过GD拓展函数；<br>imagecopymerge(画布资源?,水印资源?,画布x坐标?,画布y坐标?,水印x坐标?,水印y坐标?,水印宽?,水印高?,水印透明度?);</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$合并资源? = imagecopymerge(画布资源?,水印资源?,画布x坐标?,画布y坐标?,水印x坐标?,水印y坐标?,imagesx(水印资源?),imagesy(水印资源?),50);</span><br><span class="line">var_dump(合并资源?);</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/06/13/e2qK6VjzrlDByt8.png"></p>
</li>
<li><p>保存合并资源；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">header(&quot;content-type:image/jpeg&quot;);</span><br><span class="line">imagejpeg(画布资源?);</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/06/13/drnO8qe9K34SjgN.png"></p>
</li>
<li><p>销毁资源；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">imagedestroy(画布资源?);</span><br><span class="line">imagedestroy(水印资源?);</span><br></pre></td></tr></table></figure>
<h3 id="封装函数：指定九位水印图"><a href="#封装函数：指定九位水印图" class="headerlink" title="封装函数：指定九位水印图"></a>封装函数：指定九位水印图</h3></li>
<li><p>创建制图函数结构；</p>
<p> 函数条件：</p>
<ol>
<li>获取原图画布资源；</li>
<li>获取水印资源；</li>
<li>合并水印图存储位置；</li>
<li>位置选择：九宫格；</li>
<li>水印透明度；</li>
<li>&amp;$错误输出：引用传参记录错误；<br><img src="https://s2.loli.net/2022/06/13/NPo2Ufu4m3nTEJX.png"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">function 函数封装?(原图画布资源?,水印资源?,合并存储路径?,错误输出?,位置选择? = 1,水印透明度 = 20)&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li><p>返回函数处理结果：成功返回存储名/失败返回false输出错误(引用传参记录处理)；<br><img src="https://s2.loli.net/2022/06/13/lTeEmI4qZB8QSrA.png"></p>
</li>
<li><p>判断存在：原图画布资源/水印资源；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">if(!is_file(资源定义赋值?))&#123;</span><br><span class="line">	$错误输出? = &quot;原图画布不存在&quot;;</span><br><span class="line">	return false;</span><br><span class="line">&#125;</span><br><span class="line">if(!is_file(水印定义赋值?))&#123;</span><br><span class="line">	$错误输出? = &quot;水印资源不存在&quot;;</span><br><span class="line">	return false;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/06/13/NB5zg6x7A4qrIPG.png"></p>
</li>
<li><p>判断存在：合并存储路径；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if(!is_dir(合并存储路径?))&#123;</span><br><span class="line">	$错误输出? = &quot;保存存储路径不正确&quot;;</span><br><span class="line">	return false；</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/06/13/ygbuQipjoxKnYV6.png"></p>
</li>
<li><p>获取开启资源：原图画布资源/水印资源；</p>
<ol>
<li>获取资源<strong>信息数组</strong>；<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$画布资源信息? = getimagesize(原图画布资源?);</span><br><span class="line">$水印资源信息? = getimagesize(水印资源信息?);</span><br><span class="line">echo $画布资源信息?[&#x27;mime&#x27;];</span><br><span class="line">echo $水印资源信息?[&#x27;mime&#x27;];</span><br></pre></td></tr></table></figure>
<img src="https://s2.loli.net/2022/06/13/SWvZj6sTUJQo14l.png"></li>
<li>开启资源：通过mime类型<strong>指定函数匹配数组</strong>(成功构造<strong>组合资源函数</strong>/失败报错)；<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$资源匹配? = array(</span><br><span class="line">	&quot;image/jpeg&quot; =&gt; &quot;jpeg&quot;,</span><br><span class="line">	&quot;image/jpg&quot; =&gt; &quot;jpeg&quot;,</span><br><span class="line">	&quot;image/gif&quot; =&gt; &quot;gif&quot;,</span><br><span class="line">	&quot;image/png&quot; =&gt; &quot;png&quot;,</span><br><span class="line">	&quot;image/pjpeg&quot; =&gt; &quot;jpeg&quot;</span><br><span class="line">	);</span><br></pre></td></tr></table></figure>
<img src="https://s2.loli.net/2022/06/13/GCRSFbaU1gwYVxP.png"></li>
<li><strong>匹配存在</strong>(画布资源信息数组/水印资源信息数组)：<strong>判断下标值key</strong>；<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">if(array_key_exists(画布资源信息?[&#x27;mime&#x27;],资源匹配?))&#123;</span><br><span class="line">	$错误输出? = &quot;当前画布资源类型无法处理合并水印&quot;;</span><br><span class="line">	return false;</span><br><span class="line">&#125;</span><br><span class="line">if(array_key_exists(水印资源信息?[&#x27;mime&#x27;],资源匹配?))&#123;</span><br><span class="line">	$错误输出? = &quot;当前水印资源类型无法处理合并水印&quot;;</span><br><span class="line">	return false;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<img src="https://s2.loli.net/2022/06/13/S4UjohvVZtdf873.png"></li>
<li>构造<strong>组合资源</strong>函数：开启画布资源函数/开启水印资源函数/开启合并资源函数；<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$构造画布资源? = &quot;imagecreatefrom&quot; . 资源匹配?[画布资源信息?[&#x27;mime&#x27;]];</span><br><span class="line">$构造水印资源? = &quot;imagecreatefrom&quot; . 资源匹配?[水印资源信息?[&#x27;mime&#x27;]];</span><br><span class="line">$画布保存? = &quot;image&quot; . 资源匹配?[画布资源信息?[&#x27;mime&#x27;]];</span><br><span class="line">echo $构造画布资源?;</span><br><span class="line">echo $构造水印资源?;</span><br></pre></td></tr></table></figure>
<img src="https://s2.loli.net/2022/06/13/pjAqi4tTB6ZLdao.png"></li>
<li>开启资源；<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$开启画布资源? = 构造画布资源?(资源定义赋值?);</span><br><span class="line">$开启水印资源? = 构造水印资源?(水印定义赋值?);</span><br></pre></td></tr></table></figure>
<img src="https://s2.loli.net/2022/06/13/3pqsemurnYXd1fk.png"></li>
</ol>
</li>
<li><p><strong>合并资源</strong>生成水印：计算水印位置；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">//初始化水印位置；</span><br><span class="line">$水印x坐标? = $水印y坐标? = 0;</span><br><span class="line">switch($位置选择?)&#123;</span><br><span class="line">	case 1:</span><br><span class="line">	//左上</span><br><span class="line">		break;</span><br><span class="line">	case 2:</span><br><span class="line">	//中上</span><br><span class="line">		$水印x坐标? = floor((画布资源信息?[0] - 水印资源信息?[0]) / 2);</span><br><span class="line">		break;</span><br><span class="line">	//右上</span><br><span class="line">	case 3:</span><br><span class="line">		$水印x坐标? = 画布资源信息?[0] - 水印资源信息?[0];</span><br><span class="line">		break;</span><br><span class="line">	//左中</span><br><span class="line">	case 4:</span><br><span class="line">		$水印y坐标? = floor((画布资源信息?[1] - 水印资源信息?[1]) / 2);</span><br><span class="line">		break;</span><br><span class="line">	//中中</span><br><span class="line">	case 5:</span><br><span class="line">		$水印x坐标? = floor((画布资源信息?[0] - 水印资源信息?[0]) / 2);</span><br><span class="line">		$水印y坐标? = floor((画布资源信息?[1] - 水印资源信息?[1]) / 2);	</span><br><span class="line">		break;</span><br><span class="line">	//右中</span><br><span class="line">	case 6:</span><br><span class="line">		$水印x坐标? = 画布资源信息?[0] - 水印资源信息?[0];</span><br><span class="line">		$水印y坐标? = floor((画布资源信息?[1] - 水印资源信息?[1]) / 2);</span><br><span class="line">		break;</span><br><span class="line">	//右下</span><br><span class="line">	case 7:</span><br><span class="line">		$水印y坐标? = 画布资源信息?[1] - 水印资源信息?[1];</span><br><span class="line">		break;</span><br><span class="line">	//左下</span><br><span class="line">	case 8:</span><br><span class="line">		$水印x坐标? = floor((画布资源信息?[0] - 水印资源信息?[0]) / 2);</span><br><span class="line">		$水印y坐标? = 画布资源信息?[1] - 水印资源信息?[1];</span><br><span class="line">		break;</span><br><span class="line">	//中下</span><br><span class="line">	case 9:</span><br><span class="line">		$水印x坐标? = 画布资源信息?[0] - 水印资源信息?[0];</span><br><span class="line">		$水印y坐标? = 画布资源信息?[1] - 水印资源信息?[1];</span><br><span class="line">		break</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/06/13/CnPlTrvI3zASRW5.png"><br><img src="https://s2.loli.net/2022/06/13/g4rAcMSLiEsHCbu.png"></p>
</li>
<li><p>判断合并资源：保存销毁；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">if(imagecopymerge(开启画布资源?,开启水印资源?,水印x坐标?,水印y坐标?,0,0,水印资源信息?[0],水印资源信息?[1],水印透明度? = 20))&#123;</span><br><span class="line">//成功保存，返回路径；</span><br><span class="line">	header(&quot;content-type&quot; . 画布资源信息?[&#x27;mime&#x27;]);</span><br><span class="line">	//规范路径；</span><br><span class="line">	$组合路径资源? = &#x27;路径?&#x27; . trim(strrchr(画布资源? , &#x27;/&#x27;) , &#x27;/&#x27;);</span><br><span class="line">	$合并资源保存?($开启画布资源?,合并存储路径? . &#x27;/&#x27;. 组合路径资源?);</span><br><span class="line">	return $组合路径资源?;</span><br><span class="line">	//销毁资源；</span><br><span class="line">	imagedestroy(开启画布资源?);</span><br><span class="line">	imagedestroy(开启水印资源?);</span><br><span class="line">&#125;else&#123;</span><br><span class="line">//失败报错；</span><br><span class="line">	$错误输出? = &quot;水印合并资源处理失败&quot;;</span><br><span class="line">return false;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/06/13/n21STckMZP7g3di.png"></p>
</li>
<li><p>判断调用封装：写入数据库；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$调用返回? = watermark(&#x27;画布资源路径?&#x27;,&#x27;水印资源路径?&#x27;,__DIR__,错误输出?);</span><br><span class="line">if(调用返回?)&#123;</span><br><span class="line">	echo 调用返回?;</span><br><span class="line">&#125;else&#123;</span><br><span class="line">	echo 错误输出?;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/06/13/uGRyts3IVrHd8Bm.png"></p>
</li>
</ol>

    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/day14_php/" rel="prev" title="day14_php">
      <i class="fa fa-chevron-left"></i> day14_php
    </a></div>
      <div class="post-nav-item"></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#GD%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86"><span class="nav-number">1.</span> <span class="nav-text">GD图像处理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#gd%E5%BA%93%E5%BC%95%E5%85%A5"><span class="nav-number">1.1.</span> <span class="nav-text">gd库引入</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#gd%E5%BA%93%E5%9F%BA%E6%9C%AC%E5%A4%84%E7%90%86"><span class="nav-number">1.2.</span> <span class="nav-text">gd库基本处理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%94%BB%E5%B8%83%E5%A4%84%E7%90%86%E9%80%BB%E8%BE%91"><span class="nav-number">1.2.1.</span> <span class="nav-text">画布处理逻辑</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E7%94%BB%E5%B8%83%E8%B5%84%E6%BA%90"><span class="nav-number">1.2.2.</span> <span class="nav-text">创建画布资源</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BC%80%E5%90%AF%E7%94%BB%E5%B8%83%E8%B5%84%E6%BA%90%EF%BC%9A%E5%8C%B9%E9%85%8D%E5%AF%B9%E5%BA%94%E6%A0%BC%E5%BC%8F"><span class="nav-number">1.2.2.1.</span> <span class="nav-text">开启画布资源：匹配对应格式</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%93%8D%E4%BD%9C%E7%94%BB%E5%B8%83%EF%BC%9A%E5%88%9B%E5%BB%BA-%E5%8F%A5%E6%9F%84-%E5%AE%9E%E7%BA%BF-%E6%93%8D%E4%BD%9C"><span class="nav-number">1.2.3.</span> <span class="nav-text">操作画布：创建&#x2F;(句柄&#x2F;实线)&#x2F;操作</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A1%AB%E5%85%85%E9%A2%9C%E8%89%B2"><span class="nav-number">1.2.3.1.</span> <span class="nav-text">填充颜色</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%B6%E4%BD%9C%E5%AE%9E%E7%BA%BF"><span class="nav-number">1.2.3.2.</span> <span class="nav-text">制作实线</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%B6%E4%BD%9C%E7%9F%A9%E5%BD%A2"><span class="nav-number">1.2.3.3.</span> <span class="nav-text">制作矩形</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%B6%E4%BD%9C%E5%9C%86%E5%BC%A7"><span class="nav-number">1.2.3.4.</span> <span class="nav-text">制作圆弧</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%94%BB%E5%B8%83%E5%86%99%E5%AD%97"><span class="nav-number">1.2.3.5.</span> <span class="nav-text">画布写字</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%9D%E5%AD%98%E8%BE%93%E5%87%BA%E8%B5%84%E6%BA%90%EF%BC%9A%E7%BD%91%E9%A1%B5%E5%9B%BE%E7%89%87-%E6%9C%AC%E5%9C%B0%E6%96%87%E4%BB%B6"><span class="nav-number">1.2.4.</span> <span class="nav-text">保存输出资源：网页图片&#x2F;本地文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%94%80%E6%AF%81%E7%94%BB%E5%B8%83%E8%B5%84%E6%BA%90"><span class="nav-number">1.2.5.</span> <span class="nav-text">销毁画布资源</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E7%94%BB%E5%B8%83%E8%B5%84%E6%BA%90%EF%BC%9A%E4%BF%A1%E6%81%AF"><span class="nav-number">1.2.6.</span> <span class="nav-text">获取画布资源：信息</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%94%BB%E5%B8%83%E5%B0%BA%E5%AF%B8%EF%BC%9A%E6%8C%87%E5%AE%9A%E4%BF%A1%E6%81%AF-%E5%AE%BD-%E9%AB%98"><span class="nav-number">1.2.6.1.</span> <span class="nav-text">画布尺寸：指定信息(宽&#x2F;高)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9B%BE%E7%89%87%E5%B0%BA%E5%AF%B8%EF%BC%9A%E6%89%80%E6%9C%89%E4%BF%A1%E6%81%AF%E8%BE%93%E5%87%BA%E6%95%B0%E7%BB%84"><span class="nav-number">1.2.6.2.</span> <span class="nav-text">图片尺寸：所有信息输出数组</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#gd%E5%BA%93%E9%AA%8C%E8%AF%81%E7%A0%81"><span class="nav-number">1.3.</span> <span class="nav-text">gd库验证码</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0%E9%80%BB%E8%BE%91"><span class="nav-number">1.3.1.</span> <span class="nav-text">实现逻辑</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%AA%8C%E8%AF%81%E7%A0%81%E7%94%9F%E6%88%90%E5%B1%95%E7%A4%BA"><span class="nav-number">1.3.2.</span> <span class="nav-text">验证码生成展示</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%AA%8C%E8%AF%81%E7%A0%81%E9%9A%8F%E6%9C%BA%E5%8F%98%E5%8C%96%EF%BC%9A%E6%96%87%E5%AD%97"><span class="nav-number">1.3.3.</span> <span class="nav-text">验证码随机变化：文字</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%AA%8C%E8%AF%81%E7%A0%81%E9%9A%8F%E6%9C%BA%E5%8F%98%E5%8C%96%EF%BC%9A%E9%A2%9C%E8%89%B2"><span class="nav-number">1.3.4.</span> <span class="nav-text">验证码随机变化：颜色</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%AA%8C%E8%AF%81%E7%A0%81%E7%94%9F%E6%88%90%E5%B9%B2%E6%89%B0%EF%BC%9A%E8%83%8C%E6%99%AF%E6%A8%A1%E7%B3%8A-%E5%AE%9E%E7%82%B9%E7%BA%BF%E5%B9%B2%E6%89%B0"><span class="nav-number">1.3.5.</span> <span class="nav-text">验证码生成干扰：背景模糊&#x2F;实点线干扰</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BE%AA%E7%8E%AF%E7%94%9F%E6%88%90%E5%B9%B2%E6%89%B0%E7%82%B9"><span class="nav-number">1.3.5.1.</span> <span class="nav-text">循环生成干扰点</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BE%AA%E7%8E%AF%E7%94%9F%E6%88%90%E5%B9%B2%E6%89%B0%E7%BA%BF"><span class="nav-number">1.3.5.2.</span> <span class="nav-text">循环生成干扰线</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%98%E5%8C%96%E6%96%87%E5%AD%97%EF%BC%9A%E5%A4%A7%E5%B0%8F-%E4%BD%8D%E7%BD%AE-%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0"><span class="nav-number">1.3.5.3.</span> <span class="nav-text">变化文字：大小&#x2F;位置&#x2F;可变参数</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%AA%8C%E8%AF%81%E7%A0%81%E7%82%B9%E5%87%BB%E5%88%B7%E6%96%B0"><span class="nav-number">1.3.6.</span> <span class="nav-text">验证码点击刷新</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BC%A9%E7%95%A5%E5%9B%BE%E5%A4%84%E7%90%86"><span class="nav-number">1.4.</span> <span class="nav-text">缩略图处理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86"><span class="nav-number">1.4.1.</span> <span class="nav-text">实现原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BC%A9%E7%95%A5%E5%9B%BE%EF%BC%9A%E6%8C%87%E5%AE%9A%E5%AE%BD%E9%AB%98"><span class="nav-number">1.4.2.</span> <span class="nav-text">缩略图：指定宽高</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BC%A9%E7%95%A5%E5%9B%BE%EF%BC%9A%E9%80%82%E9%85%8D%E7%AD%89%E6%AF%94%E5%AE%BD%E9%AB%98"><span class="nav-number">1.4.3.</span> <span class="nav-text">缩略图：适配等比宽高</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%82%E9%85%8D%E7%AE%97%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86"><span class="nav-number">1.4.3.1.</span> <span class="nav-text">适配算法实现原理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0%E5%A4%84%E7%90%86"><span class="nav-number">1.4.3.2.</span> <span class="nav-text">实现处理</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#GD%E5%BA%93%E6%B0%B4%E5%8D%B0%E5%A4%84%E7%90%86"><span class="nav-number">1.5.</span> <span class="nav-text">GD库水印处理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0%E9%80%BB%E8%BE%91-1"><span class="nav-number">1.5.1.</span> <span class="nav-text">实现逻辑</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8C%87%E5%AE%9A%E5%9B%BA%E5%AE%9A%E4%BD%8D%E7%BD%AE%E6%B0%B4%E5%8D%B0%E5%9B%BE"><span class="nav-number">1.5.2.</span> <span class="nav-text">指定固定位置水印图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B0%81%E8%A3%85%E5%87%BD%E6%95%B0%EF%BC%9A%E6%8C%87%E5%AE%9A%E4%B9%9D%E4%BD%8D%E6%B0%B4%E5%8D%B0%E5%9B%BE"><span class="nav-number">1.5.3.</span> <span class="nav-text">封装函数：指定九位水印图</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">tyson_H</p>
  <div class="site-description" itemprop="description">tyson's_1point3acres</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">20</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">categories</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">tyson_H</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
